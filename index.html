<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>DI√ÅRIO DE BORDO - Elite</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0d0f10;
            --card: #16191b;
            --text: #ffffff;
            --text-dim: #94a3b8;
            --accent: #38b000;
            --border: rgba(255,255,255,0.08);
            --bar-bg: rgba(255,255,255,0.05);
        }

        body.light-mode {
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #0f172a;
            --text-dim: #64748b;
            --accent: #2563eb;
            --border: rgba(0,0,0,0.1);
            --bar-bg: rgba(0,0,0,0.05);
        }

        * { box-sizing: border-box; font-family: 'Inter', sans-serif; transition: 0.25s; }

        body {
            background-color: var(--bg); color: var(--text);
            margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center;
            min-height: 100vh;
        }

        /* Barra de Horas L√≠quidas Superior (Suave) */
        .top-stats-bar {
            width: 100%; padding: 8px 20px; background: var(--card);
            border-bottom: 1px solid var(--border); display: flex;
            justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100;
        }
        .net-label { font-size: 10px; font-weight: 800; text-transform: uppercase; color: var(--text-dim); letter-spacing: 1px; }
        .net-value { font-size: 14px; font-weight: 600; color: var(--accent); font-family: monospace; }

        .container { width: 100%; max-width: 420px; padding: 20px; text-align: center; }

        .app-title { font-size: 18px; font-weight: 800; letter-spacing: 2px; margin-bottom: 30px; color: var(--text); }
        .app-title span { color: var(--accent); }

        /* Timer de Foco */
        .timer-section { margin-bottom: 30px; }
        #current-mission { font-size: 11px; font-weight: 800; color: var(--accent); text-transform: uppercase; display: block; margin-bottom: 5px; }
        #display { font-size: 64px; font-weight: 400; letter-spacing: -2px; margin: 10px 0; color: var(--text); }

        .controls { display: flex; gap: 12px; justify-content: center; margin-top: 15px; }
        .btn-cmd { 
            width: 50px; height: 50px; border-radius: 15px; border: 1px solid var(--border);
            background: var(--card); color: var(--text); cursor: pointer; display: flex; align-items: center; justify-content: center;
        }
        .btn-cmd.play { background: var(--accent); color: white; border: none; }

        /* Cria√ß√£o de Disciplina */
        .add-box { display: grid; grid-template-columns: 1fr 70px 50px; gap: 8px; margin-bottom: 25px; }
        input { 
            background: var(--card); border: 1px solid var(--border); padding: 12px; 
            border-radius: 12px; color: var(--text); font-size: 14px; outline: none;
        }
        input::placeholder { color: var(--text-dim); }
        .btn-plus { background: var(--accent); border: none; border-radius: 12px; color: white; cursor: pointer; font-size: 20px; }

        /* Lista de Miss√µes */
        .task-card {
            background: var(--card); border: 1px solid var(--border); border-radius: 16px;
            padding: 15px; margin-bottom: 10px; text-align: left; position: relative; cursor: pointer;
        }
        .task-card.active { border-color: var(--accent); box-shadow: 0 0 15px rgba(0,0,0,0.1); }
        .task-card h4 { margin: 0; font-size: 14px; text-transform: uppercase; color: var(--text); }

        .progress-container { height: 4px; background: var(--bar-bg); border-radius: 2px; margin: 10px 0; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--accent); width: 0%; }

        .task-footer { display: flex; justify-content: space-between; font-size: 10px; font-weight: 700; color: var(--text-dim); }

        /* Floating Buttons */
        .fab-group { position: fixed; bottom: 20px; right: 20px; display: flex; flex-direction: column; gap: 10px; }
        .fab { 
            width: 45px; height: 45px; border-radius: 50%; border: none; color: white;
            display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

    </style>
</head>
<body>

    <div class="top-stats-bar">
        <span class="net-label">L√≠quidas Hoje</span>
        <span class="net-value" id="total-net">00:00:00</span>
    </div>

    <div class="container">
        <h1 class="app-title">DI√ÅRIO DE <span>BORDO</span></h1>

        <div class="timer-section">
            <span id="current-mission">Selecione uma Miss√£o</span>
            <div id="display">00:00:00</div>
            <div class="controls">
                <button class="btn-cmd" onclick="reset()">‚ü≤</button>
                <button class="btn-cmd play" onclick="start()">‚ñ∂</button>
                <button class="btn-cmd" onclick="pause()">‚ùô‚ùô</button>
            </div>
        </div>

        <div class="add-box">
            <input type="text" id="task-name" placeholder="Mat√©ria">
            <input type="number" id="task-goal" placeholder="Min">
            <button class="btn-plus" onclick="createTask()">+</button>
        </div>

        <div id="task-list"></div>
    </div>

    <div class="fab-group">
        <button class="fab" style="background: #ef4444;" onclick="clearAll()">üóëÔ∏è</button>
        <button class="fab" style="background: var(--accent);" onclick="toggleTheme()" id="theme-btn">‚òÄÔ∏è</button>
    </div>

    <script>
        let timer;
        let seconds = 0;
        let tasks = JSON.parse(localStorage.getItem('study_tasks')) || [];
        let activeTaskId = null;

        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            const isLight = document.body.classList.contains('light-mode');
            document.getElementById('theme-btn').innerText = isLight ? 'üåô' : '‚òÄÔ∏è';
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
        }
        if(localStorage.getItem('theme') === 'light') toggleTheme();

        function save() { 
            localStorage.setItem('study_tasks', JSON.stringify(tasks)); 
            const total = tasks.reduce((acc, t) => acc + t.elapsedSeconds, 0);
            document.getElementById('total-net').innerText = formatTime(total);
        }

        function formatTime(s) {
            const h = Math.floor(s / 3600);
            const m = Math.floor((s % 3600) / 60);
            const sec = s % 60;
            return `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(sec).padStart(2, '0')}`;
        }

        function createTask() {
            const name = document.getElementById('task-name').value;
            const goal = document.getElementById('task-goal').value;
            if (!name || !goal) return;
            tasks.push({ id: Date.now(), name, goalSeconds: goal * 60, elapsedSeconds: 0 });
            document.getElementById('task-name').value = '';
            document.getElementById('task-goal').value = '';
            save(); renderTasks();
        }

        function selectTask(id) {
            if (timer) pause();
            activeTaskId = id;
            const task = tasks.find(t => t.id === id);
            seconds = task.elapsedSeconds;
            document.getElementById('current-mission').innerText = task.name;
            updateDisplay(); renderTasks();
        }

        function updateDisplay() {
            document.getElementById('display').innerText = formatTime(seconds);
            if (activeTaskId) {
                const task = tasks.find(t => t.id === activeTaskId);
                task.elapsedSeconds = seconds;
                save();
                const fill = document.getElementById(`fill-${activeTaskId}`);
                const pText = document.getElementById(`perc-${activeTaskId}`);
                const p = Math.min((task.elapsedSeconds / task.goalSeconds) * 100, 100).toFixed(0);
                if(fill) fill.style.width = p + '%';
                if(pText) pText.innerText = p + '%';
                const totalText = document.getElementById(`total-${activeTaskId}`);
                if(totalText) totalText.innerText = 'FEITO: ' + formatTime(task.elapsedSeconds);
            }
        }

        function start() {
            if (!activeTaskId) return;
            if (!timer) timer = setInterval(() => { seconds++; updateDisplay(); }, 1000);
        }

        function pause() { clearInterval(timer); timer = null; }

        function reset() {
            if (!activeTaskId || !confirm("Reiniciar cron√¥metro?")) return;
            pause(); seconds = 0; updateDisplay(); renderTasks();
        }

        function clearAll() {
            if (confirm("Apagar todos os registros do dia?")) {
                pause(); tasks = []; activeTaskId = null; seconds = 0;
                localStorage.removeItem('study_tasks');
                document.getElementById('display').innerText = "00:00:00";
                document.getElementById('total-net').innerText = "00:00:00";
                renderTasks();
            }
        }

        function renderTasks() {
            const list = document.getElementById('task-list');
            list.innerHTML = '';
            tasks.forEach(task => {
                const perc = Math.min((task.elapsedSeconds / task.goalSeconds) * 100, 100).toFixed(0);
                list.innerHTML += `
                    <div class="task-card ${task.id === activeTaskId ? 'active' : ''}" onclick="selectTask(${task.id})">
                        <div style="display:flex; justify-content:space-between; align-items:center;">
                            <h4>${task.name}</h4>
                            <span id="perc-${task.id}" style="color:var(--accent); font-weight:800; font-size:12px;">${perc}%</span>
                        </div>
                        <div class="progress-container"><div id="fill-${task.id}" class="progress-fill" style="width:${perc}%"></div></div>
                        <div class="task-footer">
                            <span>META: ${task.goalSeconds/60}M</span>
                            <span id="total-${task.id}">FEITO: ${formatTime(task.elapsedSeconds)}</span>
                        </div>
                    </div>`;
            });
            const total = tasks.reduce((acc, t) => acc + t.elapsedSeconds, 0);
            document.getElementById('total-net').innerText = formatTime(total);
        }
        renderTasks();
    </script>
</body>
</html>
